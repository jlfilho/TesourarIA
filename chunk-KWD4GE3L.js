import{a as y,b as T}from"./chunk-4DGGTUMW.js";import{b as j,c as U,d as O}from"./chunk-Z2TFSSHX.js";import"./chunk-BXAG4IEX.js";import"./chunk-EJJBCPAK.js";import{a as b,b as _,c as M,d as D,e as v,f as P,g as k,h as F,i as A,j as I,k as R,l as V,m as L,n as H,o as $,p as z,q as N,r as B}from"./chunk-4DCVLILD.js";import{Cc as x,Gb as f,Qb as i,Rb as m,Sb as S,Va as s,Wa as E,Xb as h,ga as p,ib as C,na as w,nb as c,vb as n,wb as o,xb as d,yb as u,zb as g}from"./chunk-3D2QFLPJ.js";var K=(()=>{class t{constructor(){this.data=[],this.mockData=[{date:"2025-10-01",fixedCost:8e3,variableCost:4e3,totalCost:12e3},{date:"2025-10-02",fixedCost:8e3,variableCost:7e3,totalCost:15e3},{date:"2025-10-03",fixedCost:8e3,variableCost:1e4,totalCost:18e3},{date:"2025-10-04",fixedCost:8e3,variableCost:6e3,totalCost:14e3},{date:"2025-10-05",fixedCost:8e3,variableCost:5e3,totalCost:13e3},{date:"2025-10-06",fixedCost:8e3,variableCost:11e3,totalCost:19e3},{date:"2025-10-07",fixedCost:8e3,variableCost:9e3,totalCost:17e3},{date:"2025-10-08",fixedCost:8e3,variableCost:12e3,totalCost:2e4},{date:"2025-10-09",fixedCost:8e3,variableCost:8500,totalCost:16500},{date:"2025-10-10",fixedCost:8e3,variableCost:7500,totalCost:15500},{date:"2025-10-11",fixedCost:8e3,variableCost:9500,totalCost:17500},{date:"2025-10-12",fixedCost:8e3,variableCost:10500,totalCost:18500},{date:"2025-10-13",fixedCost:8e3,variableCost:5500,totalCost:13500},{date:"2025-10-14",fixedCost:8e3,variableCost:6500,totalCost:14500}],this.chartData=[],this.colorScheme={domain:["#2563eb","#22c55e","#f97316"]},this.view=[1e3,400]}ngOnInit(){(!this.data||this.data.length===0)&&(this.data=this.mockData),this.updateChartData()}ngOnChanges(){this.data&&this.data.length>0&&this.updateChartData()}updateChartData(){let e=a=>{let r=new Date(a),G=r.getDate().toString().padStart(2,"0"),J=(r.getMonth()+1).toString().padStart(2,"0");return`${G}/${J}`};this.chartData=[{name:"Custo Total",series:this.data.map(a=>({name:e(a.date),value:a.totalCost}))},{name:"Custo Fixo",series:this.data.map(a=>({name:e(a.date),value:a.fixedCost}))},{name:"Custo Vari\xE1vel",series:this.data.map(a=>({name:e(a.date),value:a.variableCost}))}]}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-costs-timeseries"]],inputs:{data:"data"},standalone:!0,features:[w,h],decls:8,vars:14,consts:[[1,"chart-card"],[3,"view","scheme","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","autoScale","animations","timeline","gradient"]],template:function(a,r){a&1&&(n(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),i(3,"S\xE9rie Temporal de Custos Di\xE1rios"),o(),n(4,"mat-card-subtitle"),i(5," Comparativo entre custo total, fixo e vari\xE1vel "),o()(),n(6,"mat-card-content"),d(7,"ngx-charts-line-chart",1),o()()),a&2&&(s(7),c("view",r.view)("scheme",r.colorScheme)("results",r.chartData)("xAxis",!0)("yAxis",!0)("legend",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("xAxisLabel","Data")("yAxisLabel","Custo (R$)")("autoScale",!0)("animations",!0)("timeline",!0)("gradient",!1))},dependencies:[x,P,b,M,v,D,_,O,j],styles:[".chart-card[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding:1rem}  ngx-charts-line-chart{font-family:Roboto,sans-serif}mat-card-title[_ngcontent-%COMP%]{font-weight:600;color:#1e293b}mat-card-subtitle[_ngcontent-%COMP%]{color:#64748b;margin-top:.5rem}"]})}}return t})();var q=(()=>{class t{constructor(){this.data=[],this.DEFAULT_DATA=[{name:"Custo Fixo",value:5e4},{name:"Custo por Km",value:3e4},{name:"Custos Administrativos",value:2e4}],this.chartData=[],this.colorScheme={domain:["#2563eb","#f59e0b","#22c55e"]},this.view=[500,400]}ngOnInit(){!this.data||this.data.length===0?this.chartData=[...this.DEFAULT_DATA]:this.chartData=[...this.data]}ngOnChanges(){this.data&&this.data.length>0&&(this.chartData=[...this.data])}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-cost-distribution-donut"]],inputs:{data:"data"},standalone:!0,features:[w,h],decls:8,vars:9,consts:[[1,"chart-card"],[3,"view","results","scheme","legend","labels","doughnut","explodeSlices","gradient","animations"]],template:function(a,r){a&1&&(n(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),i(3,"Distribui\xE7\xE3o dos Custos Operacionais"),o(),n(4,"mat-card-subtitle"),i(5," Visualize a composi\xE7\xE3o percentual entre tipos de custos "),o()(),n(6,"mat-card-content"),d(7,"ngx-charts-pie-chart",1),o()()),a&2&&(s(7),c("view",r.view)("results",r.chartData)("scheme",r.colorScheme)("legend",!0)("labels",!0)("doughnut",!0)("explodeSlices",!1)("gradient",!1)("animations",!0))},dependencies:[x,P,b,M,v,D,_,O,U],styles:[".chart-card[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding:1rem;text-align:center}  ngx-charts-pie-chart{display:flex;justify-content:center}mat-card-title[_ngcontent-%COMP%]{font-weight:600;color:#1e293b}mat-card-subtitle[_ngcontent-%COMP%]{color:#64748b;margin-top:.5rem}"]})}}return t})();function W(t,l){t&1&&(n(0,"th",19),i(1,"Data"),o())}function Z(t,l){if(t&1&&(n(0,"td",20),i(1),o()),t&2){let e=l.$implicit,a=f();s(),m(a.formatDate(e.date))}}function tt(t,l){t&1&&(n(0,"th",19),i(1,"Custo de Transporte"),o())}function et(t,l){if(t&1&&(n(0,"td",20),i(1),o()),t&2){let e=l.$implicit,a=f();s(),m(a.formatCurrency(e.transportCost))}}function at(t,l){t&1&&(n(0,"th",19),i(1,"Custo Fixo"),o())}function nt(t,l){if(t&1&&(n(0,"td",20),i(1),o()),t&2){let e=l.$implicit,a=f();s(),m(a.formatCurrency(e.fixedCost))}}function ot(t,l){t&1&&(n(0,"th",19),i(1,"Custo Vari\xE1vel"),o())}function it(t,l){if(t&1&&(n(0,"td",20),i(1),o()),t&2){let e=l.$implicit,a=f();s(),m(a.formatCurrency(e.variableCost))}}function rt(t,l){t&1&&(n(0,"th",19),i(1,"Total"),o())}function st(t,l){if(t&1&&(n(0,"td",20),i(1),o()),t&2){let e=l.$implicit,a=f();s(),m(a.formatCurrency(a.getTotalCost(e)))}}function lt(t,l){t&1&&d(0,"tr",21)}function dt(t,l){t&1&&d(0,"tr",22)}var St=(()=>{class t{constructor(e){this.dashboardService=e,this.costs=[],this.displayedColumns=["date","transportCost","fixedCost","variableCost","total"],this.totalFixed=0,this.totalVariable=0,this.totalTransport=0}ngOnInit(){this.loadCosts()}loadCosts(){this.dashboardService.getCosts().subscribe(e=>{this.costs=e,this.calculateTotals()})}calculateTotals(){this.totalFixed=this.costs.reduce((e,a)=>e+a.fixedCost,0),this.totalVariable=this.costs.reduce((e,a)=>e+a.variableCost,0),this.totalTransport=this.costs.reduce((e,a)=>e+a.transportCost,0)}formatCurrency(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}formatDate(e){return new Date(e).toLocaleDateString("pt-BR")}getTotalCost(e){return e.transportCost+e.fixedCost+e.variableCost}getFixedPercentage(){let e=this.totalFixed+this.totalVariable;return e>0?this.totalFixed/e*100:0}getVariablePercentage(){let e=this.totalFixed+this.totalVariable;return e>0?this.totalVariable/e*100:0}static{this.\u0275fac=function(a){return new(a||t)(E(B))}}static{this.\u0275cmp=p({type:t,selectors:[["app-costs-page"]],standalone:!0,features:[h],decls:55,vars:8,consts:[[1,"costs-page"],[1,"page-title"],["mat-table","",1,"costs-table",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","transportCost"],["matColumnDef","fixedCost"],["matColumnDef","variableCost"],["matColumnDef","total"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"breakdown-card"],[1,"breakdown-content"],[1,"breakdown-item"],[1,"label"],[1,"value"],[1,"percentage"],[1,"breakdown-item","total"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(a,r){a&1&&(n(0,"div",0)(1,"h1",1),i(2,"Custos"),o(),d(3,"app-costs-timeseries")(4,"app-cost-distribution-donut"),n(5,"mat-card")(6,"mat-card-header")(7,"mat-card-title"),i(8,"Custos dos \xDAltimos 7 Dias"),o()(),n(9,"mat-card-content")(10,"table",2),u(11,3),C(12,W,2,0,"th",4)(13,Z,2,1,"td",5),g(),u(14,6),C(15,tt,2,0,"th",4)(16,et,2,1,"td",5),g(),u(17,7),C(18,at,2,0,"th",4)(19,nt,2,1,"td",5),g(),u(20,8),C(21,ot,2,0,"th",4)(22,it,2,1,"td",5),g(),u(23,9),C(24,rt,2,0,"th",4)(25,st,2,1,"td",5),g(),C(26,lt,1,0,"tr",10)(27,dt,1,0,"tr",11),o()()(),n(28,"mat-card",12)(29,"mat-card-header")(30,"mat-card-title"),i(31,"Breakdown de Custos"),o()(),n(32,"mat-card-content")(33,"div",13)(34,"div",14)(35,"span",15),i(36,"Custo Fixo:"),o(),n(37,"span",16),i(38),o(),n(39,"span",17),i(40),o()(),d(41,"mat-divider"),n(42,"div",14)(43,"span",15),i(44,"Custo Vari\xE1vel:"),o(),n(45,"span",16),i(46),o(),n(47,"span",17),i(48),o()(),d(49,"mat-divider"),n(50,"div",18)(51,"span",15),i(52,"Total (Fixos + Vari\xE1veis):"),o(),n(53,"span",16),i(54),o()()()()()()),a&2&&(s(10),c("dataSource",r.costs),s(16),c("matHeaderRowDef",r.displayedColumns),s(),c("matRowDefColumns",r.displayedColumns),s(11),m(r.formatCurrency(r.totalFixed)),s(2),S("(",r.getFixedPercentage().toFixed(1),"%)"),s(6),m(r.formatCurrency(r.totalVariable)),s(2),S("(",r.getVariablePercentage().toFixed(1),"%)"),s(6),m(r.formatCurrency(r.totalFixed+r.totalVariable)))},dependencies:[x,P,b,M,v,_,N,k,A,L,I,F,H,R,V,$,z,T,y,K,q],styles:[".costs-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.costs-page[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:500;color:#333;margin:0}.costs-page[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.5rem}.costs-page[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .costs-table[_ngcontent-%COMP%]{width:100%}.costs-page[_ngcontent-%COMP%]   mat-card.breakdown-card[_ngcontent-%COMP%]{margin-top:1rem}.costs-page[_ngcontent-%COMP%]   mat-card.breakdown-card[_ngcontent-%COMP%]   .breakdown-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.costs-page[_ngcontent-%COMP%]   mat-card.breakdown-card[_ngcontent-%COMP%]   .breakdown-content[_ngcontent-%COMP%]   .breakdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.5rem 0}.costs-page[_ngcontent-%COMP%]   mat-card.breakdown-card[_ngcontent-%COMP%]   .breakdown-content[_ngcontent-%COMP%]   .breakdown-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex:1;font-weight:500}.costs-page[_ngcontent-%COMP%]   mat-card.breakdown-card[_ngcontent-%COMP%]   .breakdown-content[_ngcontent-%COMP%]   .breakdown-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#1976d2}.costs-page[_ngcontent-%COMP%]   mat-card.breakdown-card[_ngcontent-%COMP%]   .breakdown-content[_ngcontent-%COMP%]   .breakdown-item[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{color:#666;font-size:.9rem}.costs-page[_ngcontent-%COMP%]   mat-card.breakdown-card[_ngcontent-%COMP%]   .breakdown-content[_ngcontent-%COMP%]   .breakdown-item.total[_ngcontent-%COMP%]{margin-top:.5rem;padding-top:1rem;border-top:2px solid #ddd}.costs-page[_ngcontent-%COMP%]   mat-card.breakdown-card[_ngcontent-%COMP%]   .breakdown-content[_ngcontent-%COMP%]   .breakdown-item.total[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1.1rem}.costs-page[_ngcontent-%COMP%]   mat-card.breakdown-card[_ngcontent-%COMP%]   .breakdown-content[_ngcontent-%COMP%]   .breakdown-item.total[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.1rem;color:#333}"]})}}return t})();export{St as CostsPageComponent};
