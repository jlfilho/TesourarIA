<div class="stocks-page">
  <h1 class="page-title">Estoque e Cobertura</h1>

  <!-- Heatmap de Cobertura -->
  <app-coverage-heatmap></app-coverage-heatmap>

  <mat-card>
    <mat-card-header>
      <mat-card-title>Cobertura por Agência</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="stocks" class="stocks-table">
        <ng-container matColumnDef="agency">
          <th mat-header-cell *matHeaderCellDef>Agência</th>
          <td mat-cell *matCellDef="let stock">{{ stock.agency }}</td>
        </ng-container>

        <ng-container matColumnDef="stockCurrent">
          <th mat-header-cell *matHeaderCellDef>Estoque Atual</th>
          <td mat-cell *matCellDef="let stock">{{ formatCurrency(stock.stockCurrent) }}</td>
        </ng-container>

        <ng-container matColumnDef="demandForecast">
          <th mat-header-cell *matHeaderCellDef>Demanda Prevista</th>
          <td mat-cell *matCellDef="let stock">{{ formatCurrency(stock.demandForecast) }}</td>
        </ng-container>

        <ng-container matColumnDef="daysCovered">
          <th mat-header-cell *matHeaderCellDef>Dias Cobertos</th>
          <td mat-cell *matCellDef="let stock">{{ stock.daysCovered }}</td>
        </ng-container>

        <ng-container matColumnDef="level">
          <th mat-header-cell *matHeaderCellDef>Nível</th>
          <td mat-cell *matCellDef="let stock">
            <span [class]="getLevelClass(stock.level)">
              {{ getLevelLabel(stock.level) }}
            </span>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns" [class]="'row-' + row.level"></tr>
      </table>
    </mat-card-content>
  </mat-card>
</div>

